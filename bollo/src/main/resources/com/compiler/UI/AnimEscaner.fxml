<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.TextFlow?>
<?import javafx.scene.canvas.Canvas?>

<BorderPane xmlns="http://javafx.com/javafx/17" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.compiler.UI.controlador.AnimacionEscanerController"
            style="-fx-background-color: #1e1e1e;">
    
    <!-- TOP: Título y controles -->
    <top>
        <VBox spacing="10" style="-fx-background-color: #252525; -fx-padding: 15px;">
            <Label text="Animación del Escáner - Análisis Léxico" 
                   style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;"/>
            
            <!-- Controles de reproducción -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="btnIniciar" text="▶ Iniciar" onAction="#onIniciar" 
                        style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8px 20px;"/>
                <Button fx:id="btnPausar" text="⏸ Pausar" onAction="#onPausar" disable="true"
                        style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8px 20px;"/>
                <Button fx:id="btnDetener" text="⏹ Detener" onAction="#onDetener" disable="true"
                        style="-fx-background-color: #F44336; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8px 20px;"/>
                
                <Separator orientation="VERTICAL"/>
                
                <Button fx:id="btnAnterior" text="◀ Anterior" onAction="#onAnterior" disable="true"
                        style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-padding: 8px 15px;"/>
                <Button fx:id="btnSiguiente" text="Siguiente ▶" onAction="#onSiguiente" disable="true"
                        style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-padding: 8px 15px;"/>
                
                <Separator orientation="VERTICAL"/>
                
                <Label text="Velocidad:" style="-fx-text-fill: white;"/>
                <Slider fx:id="sliderVelocidad" prefWidth="150"/>
                <Label fx:id="lblVelocidad" text="300 ms" style="-fx-text-fill: white; -fx-min-width: 60px;"/>
            </HBox>
        </VBox>
    </top>
    
    <!-- CENTER: Contenido principal -->
    <center>
        <SplitPane dividerPositions="0.5" orientation="VERTICAL">
            
            <!-- Panel superior: Código fuente con cursor -->
            <VBox spacing="5" style="-fx-background-color: #1e1e1e;">
                <Label text="CÓDIGO FUENTE" 
                       style="-fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10px; -fx-background-color: #2d2d2d;"/>
                
                <ScrollPane fitToWidth="true" fitToHeight="true" 
                           style="-fx-background-color: #1e1e1e; -fx-background: #1e1e1e;">
                    <TextFlow fx:id="textFlowCodigo" 
                             style="-fx-background-color: #1e1e1e; -fx-padding: 10px; -fx-font-family: 'Consolas', 'Monaco', monospace; -fx-font-size: 14px;">
                    </TextFlow>
                </ScrollPane>
            </VBox>
            
            <!-- Panel inferior: Información dividida 60%-40% -->
            <SplitPane dividerPositions="0.6">
                
                <!-- Panel izquierdo 60%: Info + Tokens -->
                <SplitPane dividerPositions="0.5" orientation="VERTICAL">
                    
                    <!-- Información del paso actual -->
                    <VBox spacing="5" style="-fx-background-color: #1e1e1e;">
                        <Label text="INFORMACIÓN DEL PASO ACTUAL" 
                               style="-fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10px; -fx-background-color: #2d2d2d;"/>
                        
                        <TextArea fx:id="textAreaInfo" 
                                 editable="false" 
                                 wrapText="true"
                                 style="-fx-control-inner-background: #2d2d2d; -fx-text-fill: white; -fx-font-family: 'Consolas', monospace; -fx-font-size: 13px;">
                        </TextArea>
                    </VBox>
                    
                    <!-- Lista de tokens identificados -->
                    <VBox spacing="5" style="-fx-background-color: #1e1e1e;">
                        <Label text="TOKENS IDENTIFICADOS" 
                               style="-fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10px; -fx-background-color: #2d2d2d;"/>
                        
                        <TextArea fx:id="textAreaTokens" 
                                 editable="false"
                                 style="-fx-control-inner-background: #2d2d2d; -fx-text-fill: white; -fx-font-family: 'Consolas', monospace; -fx-font-size: 12px;">
                        </TextArea>
                    </VBox>
                    
                </SplitPane>
                
                <!-- Panel derecho 40%: Autómata -->
                <VBox spacing="5" style="-fx-background-color: #1e1e1e;">
                    <Label text="AUTÓMATA FINITO" 
                           style="-fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10px; -fx-background-color: #2d2d2d;"/>
                    
                    <Canvas fx:id="canvasAutomata" 
                            width="400" 
                            height="400"
                            style="-fx-background-color: #1e1e1e;">
                    </Canvas>
                </VBox>
                
            </SplitPane>
            
        </SplitPane>
    </center>
    
    <!-- BOTTOM: Leyenda -->
    <bottom>
        <HBox spacing="20" alignment="CENTER" 
              style="-fx-background-color: #252525; -fx-padding: 10px;">
            <Label text="🟢 Ya procesado" style="-fx-text-fill: lightgreen; -fx-font-weight: bold;"/>
            <Label text="🟡 Carácter actual" style="-fx-text-fill: yellow; -fx-font-weight: bold;"/>
            <Label text="⚪ Por procesar" style="-fx-text-fill: white;"/>
        </HBox>
    </bottom>
    
</BorderPane>